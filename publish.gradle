configurations {
    all*.exclude module : 'spring-boot-starter-logging'
    integrationTestCompile.extendsFrom testCompile
    integrationTestRuntime.extendsFrom testRuntime
}


//Trying without jar, will move to publish.gradle
//Bootstrap project
jar {
    manifest {
        attributes 'Implementation-Title': 'Yoink',
                   'Implementation-Version': '0.0.3',
                   'Main-Class':'org.wallerlab.yoink.Yoink'
    }
    from{
        configurations.compile.collect{
            it.isDirectory() ? it:zipTree(it)
        }
        configurations.runtime.collect{
            it.isDirectory() ? it:zipTree(it)
        }
    }
}
jar.doFirst{
    sourceSets.main.java.srcDirs.each { from it }
}

// generate one jar file for multi projects
/**
 subprojects.each { subproject -> evaluationDependsOn(subproject.path)}
 task allJar(type: Jar, dependsOn: subprojects.assemble) {
 zip64 = true
 baseName = 'Yoink'
 subprojects.each { subproject ->
 manifest {
 attributes 'Implementation-Title': 'Gradle Quickstart', 'Implementation-Version': version,
 'Main-Class':'org.wallerlab.yoink.Yoink',
 "Class-Path": subproject.configurations.compile.collect { it.getName() }.join(' ')
 }
 from{
 configurations.compile.collect{
 it.isDirectory() ? it:zipTree(it)
 }
 configurations.runtime.collect{
 it.isDirectory() ? it:zipTree(it)
 }
 }

 from subproject.configurations.archives.allArtifacts.files.collect { zipTree(it) }
 }
 }

 artifacts { archives allJar  }

 */

